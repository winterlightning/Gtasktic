<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">

	<title>GTasktic</title>

	<link type="text/css" rel="stylesheet" href="css/wunderlist.css">
	<link type="text/css" rel="stylesheet" href="css/dialogs.css">
	<link type="text/css" rel="stylesheet" href="css/ui.notify.css">
	
	<script src="lib/json2.js" type="text/javascript" charset="utf-8"></script>
  	<script type="text/javascript" src="lib/jquery-1.6.min.js"></script>
	<script src="lib/jquery.tmpl.js" type="text/javascript" charset="utf-8"></script>

	<!-- Loading external libraries -->
	<script type="text/javascript" src="lib/jquery.ui.1.8.10.min.js"></script>
	<script type="text/javascript" src="lib/jquery.async.js"></script>
	<script type="text/javascript" src="lib/shortcuts.js"></script>
	<script type="text/javascript" src="lib/encoder.js"></script>

	<script src="lib/dateformat.js" type="text/javascript" charset="utf-8"></script>
	<script src="lib/jquery.notify.min.js" type="text/javascript" charset="utf-8"></script>
	
	<script src="app/spine.js" type="text/javascript" charset="utf-8"></script>
	<script src="app/spine.model.sqlite.js" type="text/javascript" charset="utf-8"></script>
	<script src="app/task.js" type="text/javascript" charset="utf-8"></script>
	<script src="app/application.js" type="text/javascript" charset="utf-8"></script>

	<!-- fullcalendar shizzle -->
	<link rel='stylesheet' type='text/css' href='fullcalendar/fullcalendar.css' />
	<script type='text/javascript' src='fullcalendar/fullcalendar.js'></script>

	<script type="text/x-jquery-tmpl" id="taskTemplate">
		<div class="item {{if done}}done{{/if}}">
		  <div class="view" title="Double click to edit...">
		    <input type="checkbox" {{if done}}checked="checked"{{/if}}> 
		    <span>${name}</span>{{if note}}<img src="famfamicons/note.png" class="noteimage" />{{/if}} <span class="duedate">${duedate}</span> 
		    <input type="hidden" class="id" value="${id}" />
		    <a class="destroy"></a>
		  </div>
		  
		  <div class="edit">
  			<form class="edittask_form">
	  			<table class="editform">
	  				<tr>
	  					<td class="header"><input type="checkbox" {{if done}}checked="checked"{{/if}}></td>
	  					<td><input class="name" type="text" value="${name}"></td>
	  				</tr>
	  				<tr>
	  					<td class="header" style="vertical-align: top;"><img src="famfamicons/note.png" /></td>
	  					<td><textarea class="note" rows="2" placeholder="Add a note here" >${note}</textarea></td>
	  				</tr>
	  				<tr>
	  					<td class="header last"><img src="famfamicons/calendar.png" /></td>
	  					<td class="last"><input type="text" class="datepicker" placeholder="Due date" value="${duedate}" /><input class="editsave" type="submit" value="Save" /></td>
	  				</tr>
	  			</table>
  			</form>
		  </div>
		</div>
	</script>

	<script type="text/x-jquery-tmpl" id="listTemplate">
	  <div id="${id}" class="listdiv">
	  	  <div class="list_header">
	  	  	  <h1 class="title" style="">${name}</h1>
		      <div class="list_bar">
		      	<a class="deletelist"><img src="famfamicons/delete.png" height="14px"/></a>
		      	<a class="editlist"><img src="famfamicons/pencil.png" height="14px"/></a>
		      </div>
		      <div class="count listbutton" style="float: right;"><span class="countVal"></span> left</div>
	      </div>
	      
	      <div class="items roundedlist"></div>
	      
      	  <footer>
      	  	<a class="clear listbutton" style="">Clear completed</a>
      	  	<!-- <a class="add listbutton">Add Task</a> -->
	        <a class="addtoggle listbutton">Add Tasks</a>
	        <div class="addinputs" style="display: inline-block;">
	        	<a class="doneadding listbutton">Done Adding</a>
				<form class="addform" style="display: inline-block"><input type="text" class="addtasks" placeholder="Add your task here and hit Return for entry" /></form>
	      	</div>
	      </footer>
      </div>
	</script>

	<style type="text/css">
		.roundedlist {
			margin-bottom: 12px;
			margin-top: 12px;
		}
		
		.roundedlist li .item {
			color: #4E4E4E;
			font-family: Arial, sans-serif;
			font-size: 12px;
			-webkit-box-shadow: #333 0px 1px 3px;
			background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#EEE), to(white));
			border-radius: 5px 5px;
			cursor: pointer;
			margin-bottom: 5px;
			min-height: 20px;
			overflow: visible;
			padding: 7px 0px 0px 0px;
			position: relative;
		}
		
		#tasks li input[type="text"] {
		  font-family: inherit;
		  line-height: 1em;
		  border: 0;
		  outline: none;
		  padding: 2px;
		  padding-left: 15px;
		  border-radius: 15px 15px;
		  
		  -webkit-box-shadow: #999 1px 1px 3px inset;
		  
		  width: 90%;
		}
		
		#tasks input::-webkit-input-placeholder {
		  font-style: italic;
		}
		
		#tasks .items {
		  margin: 10px 0;
		  list-style: none;
		}

		#tasks .item.done span {
		  color: #777777;
		  text-decoration: line-through;
		}
		
		#tasks .item .destroy {
		  position: absolute;
		  right: 10px;
		  top: 16px;
		  display: none;
		  cursor: pointer;
		  width: 20px;
		  height: 20px;
		  background: url('icons/delete_active.png') no-repeat center center;
		}
		
		#tasks .item:hover .destroy {
		  top: 4px;
		  display: block;
		}
		
		#tasks .item .edit { display: none; }
		#tasks .item.editing .edit { display: block; }
		#tasks .item.editing .view { display: none; }
		
		#tasks .item span {
			margin-left: 15px;
		}
		
		#tasks .done {
			opacity: 0.3;
		}
		
		.addwrapper #addingdiv  {
			border: 0px;  
		}
		
		div.add .ui-datepicker-trigger {
			position: absolute;
			top: 0px;
			left: -25px;
		}
		
		.item .duedate {
			float: right;
			margin-right: 50px;
			font-weight: bold;
		}
		
		.item .datepicker {
			float: right;
		}
		
		.editform {
			width: 100%;
			border-collapse:collapse;
			margin: 3px 0px;
		}
		
		.editform td {
			border-bottom: 1px solid #ddd;
			padding: 3px 5px;
			height: 25px;
		}
		
		.editform input {
			float: left;
			position: relative;
			left: -5px;
		}

		.editform .header {
			width: 20px;
		}
	
		.editform td.last {
			border-bottom: 0px;
		}
	
		.header img {
			position: relative;
			left: 0px;
		} 
		
		#tasks .editform input[type="text"], #tasks .editform textarea {
			border-radius: 0px;
			border: 0px;
			-webkit-box-shadow: none;
			padding: 0px;
			margin: 0px;
			background: transparent;
			width: 90%;
			float: left;
			margin-left: 5px;
		}
		
		#tasks .editform textarea {
			margin-left: 2px;
		}
		
		.editform input.editsave {
			background-color: #888;
			color: #fff;
			padding: 2px 7px;
			border-radius: 5px 5px;
			float: right;
			margin-right: 5px;
			margin-top: 1px;
		}
		
		.roundedlist li .editing {
			padding-top: 2px;
		}
		
		.editform .name {
			position: relative;
			top: -2px;
		}
		
		.editform .datepicker {
			position: relative;
			top: 2px;
		}
		
		.view .noteimage {
			margin-left: 5px;
			vertical-align: middle;
			position: relative;
			top: -2px;
		}
		
		.listbutton {
			border-radius: 10px 10px;
			padding: 3px 10px;
			background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#EEE), to(white));
			-webkit-box-shadow: #333 0px 1px 3px;
			display: inline;
			color: #4E4E4E;
		}
		
		a.listbutton {
			cursor: hand;
		}
		
		/* top bar */
		#title {
			position: fixed;
			top: 0px;
			left: 0px;
			height: 40px;
			width: 100%;
			background: -webkit-gradient(linear, left top, left bottom, from(#CACACA), to(#DEDFE0));  
			border-bottom: 1px solid #C5C5C5;
			box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
			z-index: 1002;
		}
		
		#bottombar {
			position: fixed;
			bottom: 0px;
			left: 0px;
			height: 30px;
			width: 100%;
			-webkit-box-shadow: 0 -1px 2px rgba(0, 0, 0, 0.1);
			background: -webkit-gradient(linear, left top, left bottom, from(#DEDFE0), to(#CACACA));
		}
		
		#buttonbar a.filter:hover, #buttonbar a.active {
			color: white;
			background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(184,184,184,1)), color-stop(6%,rgba(184,184,184,1)), color-stop(22%,rgba(182,176,182,1)), color-stop(83%,rgba(151,151,151,1)), color-stop(100%,rgba(145,143,145,1)));		
		}
		
		#buttonbar a {
			-webkit-box-shadow: 0px 0px 0px;
			box-shadow: 0px 0px 1px #DDD;
			padding: 0px 8px;
			text-shadow: none;
			background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(249,249,249,1)), color-stop(6%,rgba(249,249,249,1)), color-stop(22%,rgba(242,241,242,1)), color-stop(83%,rgba(204,204,204,1)), color-stop(100%,rgba(196,195,196,1)));			
			padding-top: 5px;
			border-left: 1px solid #434343;
			float: left;
			color: #333;
			display: block;
			cursor: pointer;
			height: 18px;
			font-size: 11px;
			border-top: 1px solid #343434;
			border-bottom: 1px solid #343434;
		}
		
		#buttonbar .roundedright {
			border-right: 1px solid #343434;
			-webkit-border-radius: 0px 10px 10px 0px;
			border-radius: 0px 5px 5px 0px;
			margin-right: 12px;
		}		

		#buttonbar .roundedleft {
			border-left: 1px solid #343434;
			border-radius: 10px 0px 0px 10px;
			-webkit-border-radius: 5px 0px 0px 5px;
		}
		
		#buttonbar {
			float: left;
			padding: 8px;
			padding-right: 0px;
			padding-left: 9px;
			padding-top: 5px;
		}
		
		#iconbar {
			float: right;
			padding: 8px;
			padding-right: 0px;
			padding-right: 9px;
			padding-top: 0px;
		}
		
		#iconbar .icon {
			padding: 5px;
			margin: 2px;
		}
		
		#iconbar .icon:hover {
			border: 1px solid #999;
			margin: 1px;
			-webkit-border-radius: 5px 5px 5px 5px;
			background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(249,249,249,1)), color-stop(6%,rgba(249,249,249,1)), color-stop(22%,rgba(242,241,242,1)), color-stop(83%,rgba(204,204,204,1)), color-stop(100%,rgba(196,195,196,1)));			
		}
		
		#iconbar .icon:active {
			-webkit-box-shadow: inset 0 0 2px 2px #d3d3d3;
		}
		
		#content {
			bottom: 30px;
			padding-bottom: 15px;
		}
		.ui-notify {
			width: 350px;
			position: fixed;
			top: 50px;
			right: 20px;
		}		
		
		/* list header */
		.list_header {
			margin-top: 15px;
		}
			
		.listdiv .list_bar {
			width: 100%; 
			background-color: #fff; 
			-webkit-box-shadow: #333 0px 1px 3px; 
			background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#EEE), to(white)); 
			border-radius: 10px 10px; 
			padding-top: 7px; 
			padding-right: 7px; 
			padding-left: 7px;
			display:none;
		}
		
		.list_bar a {
			cursor: hand;
		}
		
		.listdiv .title {
			display: inline; 
			width: 100%; 
			margin-right: 5px;
		}
		
		.listdiv:hover .list_bar {
			display: inline; 
		}
		
		/* div.add {
			background: none;
			height: 17px;
		}*/
		
		.largebutton {
			font-size: 14px;
			padding: 4px 12px;
			border-radius: 10px 10px;
		}
		
		/*action on bottom buttons*/
		.bottom_button {
			font-size: 14px; 
			font-weight:bold; 
			float: left; 
			vertical-align: middle;
			cursor: hand;
		}
		
		.bottom_button .icon {
			height: 13px; 
			margin-right: 2px; 
			opacity: 0.5;
		}
		
		.bottom_button span {
			top: -1px; 
			position: relative;
			opacity: 0.7;
		}
		
		.bottom_button:hover span {
			opacity: 1;
		}
		
		.bottom_button:hover .icon {
			opacity: 0.7;
		}
		
		.editing #addlistbutton {
			display: none;
		}
		
		.adding #editlistbutton {
			display: none;
		}

		/*bottom right list filter stuff*/
		.listfilter button {
			background-color: transparent;
			background: none;
			text-shadow: none;
			box-shadow: none;
			border: none;
			
			display: inline-block;
			margin: 1px 2px 0 0;
			padding: 1px 7px 3px;
			font-size: 12px;
			line-height: 13px;
			font-weight: bold;
			color: #2E2E2E;
			background: transparent;
			text-shadow: rgba(255, 255, 255, 0.5) 0 1px 0;
			-webkit-border-radius: 8px;
			vertical-align: middle;
		}
		
		.listfilter button:hover, .listfilter button.filterselected {
			color: white;
			text-shadow: rgba(0, 0, 0, 0.4) 0 1px 0;
			background: rgba(0, 0, 0, 0.3);
			-webkit-box-shadow: 0 1px 1px rgba(0, 0, 0, 0.5) inset, 0 -1px 1px rgba(255, 255, 255, 0.25) inset, 0 1px 0 rgba(255, 255, 255, 0.5);
		}
		
		.listfilter {
			position: relative;
			top: -4px;
			left: 30;
		}
		
		.divider {
			margin: 1px 9px 0 8px;
			background-color: rgba(0, 0, 0, 0.4);
			height: 16px;
			width: 1px;
			vertical-align: middle;
			display: inline-block;
			float:right;
		}
		
		/*calendar styling to be whiter*/
		.fc-grid th {
			color: #CCC;	
		}	
		
		.fc-grid .fc-day-number {
			color: #ddd;
		}
		
		/* list div narrower */
		/* .listdiv {
			width: 31%;
			float: left;
			margin-left: 2%;
		}
		
		.firstlist .listdiv {
			margin-left: 0px;
		}
		*/
		
		/*Fix count looking like a button */
		.count {
			background: #fff;
			opacity: 0.5;
			border-radius: 4px;	
		}
		
		/* add task on the toolbar change */
		.addtasks {
			position: relative;
			height: 25px;
			background: url('images/transparentgradient.png') repeat-x right top;
			-webkit-border-radius: 6px;
			border-radius: 6px;
			border: 0px;
			color: #fff;
			padding-left: 10px;
			width: 400px;
		}
		
	</style>

  	<script>
        Titanium.include("gtask.py");
	</script>

	<script>
		function Sync () {
			
			//Check if there is a validated key
			b = Key.all();
			if (b.length > 0 ) {
				if (b[0].validated != true) {
					denied = create("default", { title:'You have not validated', text:'You need to go to setting and validate your google account first.'});					
					return;
				};
			}
			else {
				denied = create("default", { title:'You have not validated', text:'You need to go to setting and validate your google account first.'});
				return;
			};
						
			sync_window = create("sticky", { title:'Sync with Google Cloud', text:'We are currently syncing.'},{ expires:false });
			
			b = JSON.stringify(Task);
			d = JSON.stringify(Deletion);
			e = JSON.stringify(List);
			f = JSON.stringify(DeletedList);
			
			var file = Titanium.Filesystem.getApplicationDataDirectory();
			
			a = initial_login( b, d, e, f, file );	
			
			current = a.current;
			deleted = a.deletion;
			tasklist = a.tasklist;
			deleted_list = a.list_deletions;
			
			Titanium.API.debug(current);
			
			//Delete the deletions since they are synced
			$.each(Deletion.all(), function(index, value) {
				value.destroy();
			});
			
			//Delete the deletions since they are synced
			$.each(DeletedList.all(), function(index, value) {
				value.destroy();
			});
			
			//Delete tasks that are marked for deletion
			$.each(deleted, function(index, value) {
				var deleteTask = Task.find( value );
				deleteTask.destroy();
			});
			
			//Delete task list that are marked for deletion
			$.each(deleted_list, function(index, value) {
				var deleted = List.find( value );
				deleted.destroy();
			});			
			
			$.each(current, function(index, value) {
				
				var duedate = null;
				
				if (value.hasOwnProperty('due')) {
					duedate = (new Date( value.due )).format('mm/dd/yyyy');
				};
				
				if ( Task.exists( value.id ) ) {
					var editable = Task.find( value.id );
					editable.name = value.title;
					editable.done = (value.status == 'completed');
					editable.duedate = duedate;
					editable.listid = value.listid;
					
					if (value.hasOwnProperty('notes')) {
						editable.note = value.notes;
					};
					
					editable.save();
				}
				else {
					if (value.title != "") {
						var task = Task.init( { name: value.title, time: ( new Date().getTime() ).toString(), synced: true, done: (value.status == 'completed'), duedate: duedate, listid: value.listid } );
						task.id = value.id;
						if (value.hasOwnProperty('notes')) {
							task.note = value.notes;
						};
						
						task.save();
					};
				};
			});
			
			//Sync task list
			$.each(tasklist, function(index, value) {
				
				if ( List.exists( value.id ) ) {
					
					var editable = List.find( value.id );
					editable.name = value.title;
					
					editable.synced = true;
					
					editable.save();
				}
				else {
					var list = List.init( { name: value.title, synced: true, time: ( new Date().getTime() ).toString() } );
					list.id = value.id;
					
					list.save();
					
					window.App.render_new( list ); 
					
				};				
			});
			
			sync_window.close();
			create("default", { title:'Successful Sync', text:'Your todos have successfully synced with Google'});
			
		};
		
		Task.fetch();
		Deletion.fetch();
		List.fetch();
		Key.fetch();
		
		Initialized.fetch();
		
		initializeApp();
		
		var setting_url = "";
		
		keys = Key.all();
		if (keys.length != 0) {
			setting_url = keys[0].url;
		}
		else {
			setting_url = create_link();
			Key.create({ url: setting_url });
		};
		
		function create( template, vars, opts ){
			return $container.notify("create", template, vars, opts);
		};
		
		//Initial page setup
		$(function() {
			$("#newtaskdate").datepicker({
				constrainInput: true,
				buttonImage: 'famfamicons/calendar.png',
				buttonImageOnly: true,
				buttonText: '',
				showOn: 'both',
				onSelect: function(dateText, inst) {
					if ($(this).parent().parent().find('.showdate').length == 1){
						$(this).parent().parent().find('.showdate').html(dateText);
					};
				}
			});
			
			$('#googleurl').val(setting_url);
			$container = $("#container").notify();
			
			$('#calendar').fullCalendar({
				events: function(start, end, callback) {
					
					//Calendar filling with events
			        dated_tasks = Task.select(function(item){ return item.duedate != undefined; })
			
					var calendar_input = [];
					$.each(dated_tasks, function(index, value) { calendar_input.push({ title: value.name, start: new Date(value.duedate) }) });
					
					callback(calendar_input);
			    },
			});
			
			//hide the calendar initially
			$("#calendarview").hide();
			
			//list_init();
			
		});
		
		function list_init ( top ) {
			top.find( ".roundedlist" ).sortable({
		        update: function(event, ui) {
		            $(".roundedlist li").each (function(index) {
						//retrieve current task
						var current = Task.find($(this).data("id"));
    						current.order = $(this).index();
    						current.save();
  						});
  
			        }
			});
			top.find(".addinputs").toggle();
			
			top.find(".addtoggle").click( function(event)
			{
				var clicked = $(this);
			   	clicked.toggle();
			   	clicked.parent().children(".addinputs").toggle();
			});
			
			top.find(".doneadding").click(function(event)
			{
				var clicked = $(this);
			   	clicked.parent().parent().children(".addtoggle").toggle();
			   	clicked.parent().toggle();
			});
		};
		
		function rendering_cal() {
			//Calendar filling with events
			dated_tasks = Task.select(function(item){ return item.duedate != undefined; })
			
			var calendar_input = [];
			$.each(dated_tasks, function(index, value) { calendar_input.push({ title: value.name, start: new Date(value.duedate) }) });
			
			$("#calendar").fullCalendar("renderEvent", calendar_input, false);
		};
		
		function setting_windows() {
			$("#dialog").dialog({ modal: true, title: 'Settings for sync' });
		};
		
		function addlist_window() {
			$('#list_name').val("");
			$('#list_description').val("");
			$("#dialog_addlist").dialog({ modal: true, title: 'Add A New List', dialogClass: "adding" });
		};
		
		function v_code() {
			code = $('#validation').val();
			var file = Titanium.Filesystem.getApplicationDataDirectory();
			var a = validate_code(code, file);
			var flag = a.flag;
			
			if (flag == true) {
				$("#dialog").dialog("close");
				keys = Key.all();
				keys[0].validated = true;
				keys[0].save();
				create("default", { title:'Successful Validation', text:'You may use sync now'});
			}
			else {
				create("default", { title:'Failed validation', text:'Please try again'});
			};
		};
		
		function add_list() {
			name = $('#list_name').val();
			description = $('#list_description').val();
			
			newlist = List.init( { name: name, description: description, time: ( new Date().getTime() ).toString(), synced: false } );
			
			newlist.save();
			
			window.App.render_new(newlist);
			$("#dialog_addlist").dialog("close");
		};
		
		function edit_list() {
			curr_list = List.find($("#dialog_addlist").data("id"));
			curr_list.name = $('#list_name').val();
			curr_list.description = $('#list_description').val();
			curr_list.time = ( new Date().getTime() ).toString();
			curr_list.save();
			
			$("#dialog_addlist").dialog("close");
		};
		
		function open_background_dialog() {
			$("#dialog_changebackground").dialog({ modal: true, title: 'Change Your Background' });
		};

		function getAsText(readFile) {
		        
		  var reader = new FileReader();
		  reader.onload = function(e) {
		  	  alert("here 2");
			  var bin = e.target.result;
			  // bin is the binaryString
		  	  alert(bin);
		  };
		  
		  // Read file into memory as UTF-16      
		  reader.readAsBinaryString(readFile, "UTF-16");

		  return reader;
		};

		function background_change() {
			
			var file = document.getElementById('background_file').files[0];
			alert(file);
			if(file){
			    getAsText(file);
			};
		};
		
		/*simple tab function*/
		function toggle( element_a, element_b, tab_a, tab_b ) {
			$(element_a).hide();
			$(element_b).show();
			$(tab_a).removeClass("active");
			$(tab_b).addClass("active");
			
			$("#calendar").fullCalendar( 'refetchEvents' );
			$("#calendar").fullCalendar( 'windowResize' );
		};
		
		//Check if the app has been initialized or not and then initialize it
		function initializeApp() {
			//Check if the app has being initialized
			if ( Initialized.all().length == 0) {
				//Delete all of the stuff before
				delete localStorage['Task'];
				
				//Set the version number 
				new_version = Version.init({ number: "0.2" });
				new_version.save();
				
				//set the intiialization flag
				set_init = Initialized.init({ flag: "true" } );
				set_init.save();
				
				//Create a list that represent the default list
				newlist = List.init( { name: "Your Todos", description: "", time: ( new Date().getTime() ).toString(), synced: false } );
				newlist.id = "@default";
				newlist.save();
				
				//Create a bunch of todos representing what people needs to do
				new_task = Task.init({name: "Click on settings and link your gtask account", time: ( new Date().getTime() ).toString(), done: false, order: Task.all().length + 1, synced: false, listid: "@default" });
				new_task_2 = Task.init({name: "Click on sync to get the tasks in your current google account", time: ( new Date().getTime() ).toString(), done: false, order: Task.all().length + 1, synced: false, listid: "@default" });
				new_task.save();
				new_task_2.save();
				
			};
		};
		
		//get all the div showing
		function show_all_div() {
			$(".listdiv").show();
			$(".filterselected").removeClass("filterselected");
	  		$("#allbutton").addClass("filterselected");
		};
		
	</script>

</head>

<body>

	<div id="bghelp" style="background-image: url('linen.gif'); background-attachment: fixed; background-origin: initial; background-clip: initial; background-color: rgb(0, 0, 0); display: block; background-position: bottom center; background-repeat: no-repeat no-repeat; top: 40px;"></div>
	
	<header id="title">
		<div id="buttonbar">
			<a id="listtab" class="filter roundedleft active" onclick="toggle('#calendarview', '#views', '#calendartab','#listtab')"><img src="images/align_just_icon_16.png" height="11px" style="vertical-align: top; margin-right: 2px;" /> Your Lists</a>
			<a id="calendartab" class="roundedright filter" onclick="toggle('#views', '#calendarview', '#listtab', '#calendartab')"><img src="images/calendar_1_icon_16.png" height="11px" style="vertical-align: top; margin-right: 2px;" />Your Calendars</a>				
		</div>
		
		<div id="iconbar">
			<a onclick="Sync()"><img class="icon" src="images/02-redo@2x.png" height="16" /></a>
			<a onclick="setting_windows()"><img class="icon" src="images/cog_icon_16.png" /></a>
			<!-- <a onclick="open_background_dialog()"><img class="icon" src="images/picture_icon_16.png" /></a> -->
		</div>
   	</header>
	
	<div id="content" style="left: 0px; display: block; right: 0px;">

	      <!-- <div class="add">
			<div class="addwrapper">
				<form id="newtask_form">
					<input type="text" id="addingdiv" class="input-add" placeholder="Add your task here" style="border: 0px; position: relative; left: 5px;" />
					<input type="hidden" id="newtaskdate" />
				</form>
				<span class="showdate timestamp"></span>
			</div>
		  </div> -->

		  <div id="views">
		    <div id="tasks">
		     
		      <div id="listsoftasks">
		      </div>
		      
		    </div>
		  </div>		
				
		  <div id="calendarview" style="font-size: 14px">
		  	<div id='calendar'></div>
		  </div>
	</div>
	
	<div id="menublur"></div>

	<div id="bottombar">
		<div id="left">
			<a onclick="addlist_window()" class="bottom_button">
				<img class="icon" src="images/16-plus.png" style="" />
				<span class="text">Add List</span>
			</a>
			<!-- <a class="bottombutton" onclick="Sync()">Sync</a> 
			<a class="bottombutton" onclick="setting_windows()">Settings</a> -->
		</div>		
		<div id="right">
			<div class="listfilter">
				<span class="divider"></span>
				<button class="filterselected" onclick="show_all_div()" id="allbutton" >all</button>
			</div>
		</div>
	</div>

	<div id="dialog" style="display: none">
		<p>Copy and paste the following link in your browser: <br />
		<input class="input-login" type="text" id="googleurl" name="email" placeholder="URL"></p>
		<p>Copy and paste the validation code from Google; Paste it into here and press validate. <br />
		<input class="input-login" type="text" id="validation" name="email" placeholder="Validation Code"></p>
		
		<div id="account-buttons" class="ui-dialog-buttonset">        
	        <!-- LOGIN BUTTONS -->
	        <div class="loginbuttons">
	         	<input class="input-button register button-login" type="submit" id="validate" onclick="v_code()" value="Validate Code">          	        
	        </div>
	    </div>
	</div>

	<div id="dialog_addlist" style="display: none">
		<p>Name of the list: <br />
		<input class="input-login" type="text" id="list_name" name="name" placeholder="name"></p>
		<p>Description for the list: <br />
		<input class="input-login" type="text" id="list_description" name="description" placeholder="description"></p>
		
		<div id="account-buttons" class="ui-dialog-buttonset">        
	        <!-- LOGIN BUTTONS -->
	        <div class="loginbuttons">
	         	<input class="input-button register button-login" type="submit" id="addlistbutton" onclick="add_list()" value="Add List">  
	         	<input class="input-button register button-login" type="submit" id="editlistbutton" onclick="edit_list()" value="Save">        	        
	        </div>
	    </div>
	</div>

	<div id="dialog_changebackground" style="display: none">
		<p>Choose an image file: <br />
		<input class="input-login" type="file" id="background_file" name="description" placeholder="description"></p>
		
		<div id="account-buttons" class="ui-dialog-buttonset">        
	        <!-- LOGIN BUTTONS -->
	        <div class="loginbuttons">
	         	<input class="input-button register button-login" type="submit" id="addlistbutton" onclick="background_change()" value="Change Background">          	        
	        </div>
	    </div>
	</div>

	<!--- container to hold notifications, and default templates --->
	<div id="container" style="display:none">

		<div id="default">
			<h1>#{title}</h1>
			<p>#{text}</p>
		</div>

		<div id="sticky">
			<a class="ui-notify-close ui-notify-cross" href="#">x</a>
			<h1>#{title}</h1>
			<p>#{text}</p>
		</div>

		<div id="withIcon">
			<a class="ui-notify-close ui-notify-cross" href="#">x</a>
			<div style="float:left;margin:0 10px 0 0"><img src="#{icon}" alt="warning" /></div>
			<h1>#{title}</h1>
			<p>#{text}</p>
		</div>

		<div id="buttons">
			<h1>#{title}</h1>
			<p>#{text}</p>
			<p style="margin-top:10px;text-align:center">
				<input type="button" class="confirm" value="Close Dialog" />
			</p>
		</div>
	</div>

<div id="ui-datepicker-div" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div></body></html>